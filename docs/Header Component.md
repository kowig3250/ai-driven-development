## 헤더 컴포넌트 기능명세서

---

### 프론트엔드 기능명세서

#### 1. 화면 레이아웃 및 디자인 명세

- **파일 위치**: `components/Header.tsx`

1. **로고 섹션**
   - **UI 구성**: 
     - 왼쪽에 배치된 로고 이미지와 텍스트
     - 로고 이미지 크기: 32x32px
     - 텍스트: "AI Image Generator" (Inter 폰트, semibold)
   - **상호작용**: 
     - 로고 클릭 시 메인 페이지(`/`)로 이동
   - **반응형**: 
     - 모바일에서는 로고 이미지만 표시
     - 데스크톱에서는 로고 이미지와 텍스트 모두 표시

2. **내비게이션 메뉴**
   - **UI 구성**: 
     - 오른쪽에 배치된 메뉴 항목들
     - "내 갤러리" 링크
     - "이미지 생성" 링크
     - 인증 버튼 (로그인/회원가입 또는 사용자 프로필)
   - **상호작용**: 
     - "내 갤러리" 클릭 시 갤러리 페이지(`/gallery`)로 이동
     - "이미지 생성" 클릭 시 이미지 생성 페이지(`/generate`)로 이동
     - 로그인/회원가입 버튼 클릭 시 모달 표시
     - 사용자 프로필 버튼 클릭 시 드롭다운 메뉴 표시
   - **스타일**:
     - 링크: 기본 회색, 호버 시 파란색
     - 로그인 버튼: 파란색 배경, 흰색 텍스트
     - 회원가입 버튼: 초록색 배경, 흰색 텍스트

3. **모바일 메뉴**
   - **UI 구성**: 
     - 모바일 화면에서 햄버거 메뉴 버튼 표시
     - 클릭 시 드롭다운 메뉴 표시
   - **상호작용**: 
     - 햄버거 메뉴 클릭 시 메뉴 토글
     - 메뉴 항목 클릭 시 해당 페이지로 이동
     - 인증 버튼 클릭 시 모달 표시
   - **반응형**: 
     - 768px 이하에서 모바일 메뉴로 전환

4. **인증 상태 관리**
   - **UI 구성**:
     - 로그인 상태: 사용자 프로필 버튼 표시
     - 비로그인 상태: 로그인/회원가입 버튼 표시
   - **상호작용**:
     - 로그인 버튼 클릭: 로그인 모달 표시
     - 회원가입 버튼 클릭: 회원가입 모달 표시
     - 사용자 프로필 버튼 클릭: 프로필 메뉴 표시
   - **상태 전환**:
     - 로그인 성공: 프로필 버튼으로 전환
     - 로그아웃: 로그인/회원가입 버튼으로 전환

#### 2. 사용자 흐름 및 상호작용

1. **로고 클릭 → 메인 페이지 이동**
   - 로고 클릭 시 메인 페이지로 이동
   - 브랜드 일관성 유지

2. **내비게이션 메뉴 상호작용**
   - "내 갤러리" 클릭 → 갤러리 페이지 이동
   - "이미지 생성" 클릭 → 이미지 생성 페이지 이동
   - 모바일에서 햄버거 메뉴 클릭 → 드롭다운 메뉴 표시

3. **인증 관련 상호작용**
   - 로그인 버튼 클릭 → 로그인 모달 표시
   - 회원가입 버튼 클릭 → 회원가입 모달 표시
   - 사용자 프로필 클릭 → 프로필 메뉴 표시
   - 로그아웃 클릭 → 메인 페이지로 리다이렉트

#### 3. 상태 관리

1. **현재 페이지 표시**
   - 현재 페이지에 해당하는 메뉴 항목 강조 표시
   - URL 기반으로 활성 메뉴 항목 결정

2. **모바일 메뉴 상태**
   - 메뉴 열림/닫힘 상태 관리
   - 메뉴 열림 시 배경 오버레이 표시

3. **인증 상태**
   - Clerk의 `SignedIn`, `SignedOut` 컴포넌트 사용
   - 인증 상태에 따른 UI 동적 변경
   - 로그인/로그아웃 시 상태 자동 업데이트

#### 4. 테스트 항목

1. **로고 섹션**
   - 로고 이미지가 정상적으로 표시되는지 확인
   - 로고 클릭 시 메인 페이지로 이동하는지 확인
   - 반응형에서 로고 표시가 올바른지 확인

2. **내비게이션 메뉴**
   - 모든 메뉴 항목이 정상적으로 표시되는지 확인
   - 링크 클릭 시 해당 페이지로 이동하는지 확인
   - 호버 효과가 정상 작동하는지 확인

3. **모바일 메뉴**
   - 768px 이하에서 햄버거 메뉴가 표시되는지 확인
   - 메뉴 토글이 정상 작동하는지 확인
   - 드롭다운 메뉴의 항목들이 정상 작동하는지 확인

4. **인증 기능**
   - 로그인/회원가입 버튼이 정상 작동하는지 확인
   - 인증 상태에 따른 UI 변경이 올바른지 확인
   - 사용자 프로필 메뉴가 정상 작동하는지 확인
   - 로그아웃 기능이 정상 작동하는지 확인

5. **반응형 동작**
   - 모든 브레이크포인트에서 레이아웃이 올바른지 확인
   - 모바일/데스크톱 전환 시 UI가 자연스럽게 변경되는지 확인

---

### 백엔드 기능명세서

#### 1. 라우팅 처리

- **파일 위치**: `app/layout.tsx`
- **기능**: 
  - 헤더 컴포넌트를 레이아웃에 통합
  - 모든 페이지에서 일관된 헤더 표시
  - Clerk Provider 설정

#### 2. 인증 처리

- **파일 위치**: `middleware.ts`
- **기능**:
  - Clerk의 `clerkMiddleware` 사용
  - `createRouteMatcher`를 통한 라우트 매칭
  - 공개 라우트 설정:
    ```typescript
    const publicRoutes = ["/", "/sign-in(.*)", "/sign-up(.*)"];
    const ignoredRoutes = ["/api/webhook"];
    ```
  - 비동기 인증 처리:
    ```typescript
    export default clerkMiddleware(async (auth, request) => {
      if (isPublic(request) || isIgnored(request)) {
        return;
      }
      await auth.protect();
    });
    ```

#### 3. 테스트 항목

1. **라우팅**
   - 모든 라우트에서 헤더가 정상적으로 표시되는지 확인
   - 페이지 전환 시 헤더가 유지되는지 확인

2. **인증**
   - `clerkMiddleware`가 정상 작동하는지 확인
   - `createRouteMatcher`를 통한 라우트 매칭이 정확한지 확인
   - 공개 라우트 접근이 가능한지 확인
   - 보호된 라우트 접근이 제한되는지 확인
   - 비동기 인증 처리가 정상 작동하는지 확인

3. **성능**
   - 헤더 컴포넌트의 렌더링 성능 확인
   - 불필요한 리렌더링이 발생하지 않는지 확인
   - 비동기 인증 처리로 인한 지연이 없는지 확인 